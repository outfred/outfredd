# Admin Panel Features Documentation

## نظرة عامة
لوحة التحكم الإدارية لمنصة Outfred تتضمن جميع الأدوات اللازمة لإدارة المنصة بشكل كامل.

## الميزات المتاحة

### 1. التحليلات (Analytics)
- عرض إجمالي المستخدمين
- عرض عدد المتاجر المعتمدة
- عرض إجمالي المنتجات
- عرض المتاجر المعلقة (بانتظار الموافقة)

### 2. إدارة المستخدمين (Users Management)
- عرض جميع المستخدمين
- حذف المستخدمين
- عرض الأدوار (admin, user, merchant)

### 3. إدارة المتاجر (Merchants Management)
#### الميزات الأساسية:
- عرض جميع المتاجر (معتمد، معلق، مرفوض)
- الموافقة على المتاجر الجديدة
- رفض طلبات الانضمام
- حذف المتاجر

#### ميزة التعديل الجديدة:
- تعديل معلومات المتجر:
  - اسم العلامة التجارية
  - البريد الإلكتروني
  - الهاتف
  - الموقع الإلكتروني
  - رابط اللوجو
  - الوصف
  - **معرف المدير (Manager ID)**: يمكن تحديد مستخدم معين كمدير للمتجر

### 4. إدارة المنتجات (Products Management)
#### إضافة منتجات:
- اسم المنتج
- الوصف
- السعر
- الفئة
- معرف المتجر
- رابط الصورة
- الكمية المتوفرة

#### تعديل المنتجات:
- تعديل جميع معلومات المنتج
- تحديث السعر والكمية

#### استيراد المنتجات:
- استيراد المنتجات من موقع التاجر (قيد التطوير)
- إدخال معرف المتجر والرابط للاستيراد

#### حذف المنتجات:
- حذف المنتجات غير المرغوبة

### 5. إعدادات التصميم (Design Settings) - ميزة جديدة مفعّلة
#### التحكم في الألوان:
- **اللون الأساسي (Primary Color)**: لون العلامة التجارية الرئيسي (#3B1728)
- **لون التمييز (Accent Color)**: لون ثانوي للتأكيدات (#8B4665)
- **اللون الثانوي (Secondary Color)**: لون الخلفيات (#F5EDF0)

#### كيفية الاستخدام:
1. انتقل إلى تبويب "Design Settings"
2. اختر اللون من منتقي الألوان أو أدخل الكود اللوني
3. معاينة الألوان مباشرة
4. انقر "Save Design Settings" لحفظ التغييرات

**ملاحظة**: التغييرات تطبق مباشرة على المتغيرات CSS للموقع

### 6. منشئ الصفحات (Page Builder)
- قيد التطوير
- سيتيح إنشاء صفحات مخصصة بواجهة سحب وإفلات

## صلاحيات الوصول

### مطلوب دور Admin:
- إدارة المستخدمين
- الموافقة/رفض المتاجر
- تعديل المتاجر
- إضافة/تعديل/حذف المنتجات
- تعديل إعدادات التصميم
- عرض التحليلات

### نظام المديرين (Manager System):
- يمكن تعيين مستخدم كمدير لمتجر معين
- المدير يحصل على معرف فريد (Manager ID)
- يتم حفظ معرف المدير مع بيانات المتجر

## API Endpoints المستخدمة

### المتاجر:
- `PUT /merchants/update/:id` - تعديل معلومات المتجر
- `POST /merchants/approve/:id` - الموافقة على المتجر
- `POST /merchants/reject/:id` - رفض المتجر
- `DELETE /merchants/delete/:id` - حذف المتجر

### المنتجات:
- `POST /products/create` - إضافة منتج جديد
- `PUT /products/update/:id` - تعديل منتج
- `DELETE /products/delete/:id` - حذف منتج
- `GET /products/list` - عرض جميع المنتجات
- `POST /products/import` - استيراد منتجات

### الإعدادات:
- `GET /admin/settings` - الحصول على الإعدادات
- `POST /admin/settings` - تحديث الإعدادات

## نظام الألوان الحالي

### الألوان الافتراضية (Outfred Brand):
```css
--brand-primary: #3B1728 (بنفسجي/بني داكن)
--brand-accent: #8B4665 (وردي داكن)
--brand-secondary: #F5EDF0 (وردي فاتح)
```

### كيفية تطبيق الألوان:
1. يتم حفظ الألوان في قاعدة البيانات تحت `settings:global`
2. عند الحفظ، يتم تحديث متغيرات CSS مباشرة
3. التغييرات تنعكس فوراً على جميع مكونات الموقع

## الخطوات التالية

### تحسينات مقترحة:
1. نظام الأذونات المتقدم للمديرين
2. تقارير مفصلة للمبيعات
3. لوحة تحكم خاصة بالتجار
4. نظام الإشعارات للمديرين
5. أدوات استيراد متقدمة للمنتجات
6. معاينة مباشرة للتغييرات في التصميم
7. حفظ قوالب ألوان متعددة

## الملاحظات الفنية

### المصادقة:
- جميع عمليات الأدمن تتطلب توكن المصادقة (X-Access-Token)
- التحقق من دور المستخدم (admin) في الـ Backend

### قاعدة البيانات:
- استخدام Supabase KV Store
- المفاتيح:
  - `user:*` - المستخدمين
  - `merchant:*` - المتاجر
  - `product:*` - المنتجات
  - `settings:global` - الإعدادات العامة

### الأمان:
- جميع العمليات الحساسة محمية بمصادقة Admin
- التحقق من الصلاحيات في كل طلب
- تشفير كلمات المرور (SHA-256)

## دعم اللغات
- العربية (ar)
- الإنجليزية (en)
- جميع النصوص مترجمة في `LanguageContext`
